function createCommentBox(e){var t=e.target.parentElement,n="";2===t.children.length&&(n=t.children[0].innerText),t.innerHTML=document.getElementById("commentBox").innerHTML,t.getElementsByTagName("textarea")[0].value=n}function addComment(e){var t=e.target.parentElement,n=t.getElementsByTagName("textarea")[0].value;console.log(n);var a=JSON.parse(t.parentElement.dataset.json);setComment(t,a.comment=n);var r=JSON.stringify(a);t.parentElement.dataset.json=r;var o=new XMLHttpRequest;o.open("POST","/add/comment"),o.send(r)}function cancelComment(e){var t=e.target.parentElement;setComment(t,JSON.parse(t.parentElement.dataset.json).comment)}function setComment(e,t){e.innerHTML=""===t?"<button class=\"btn\" onclick='createCommentBox(event);'> Add </button>":"<p>"+t+"</p><button class=\"btn\" onclick='createCommentBox(event);'> Edit </button>"}window.onload=function(e){var s;function t(){var r=document.getElementById("table"),o=r.rows.length-1,m=new XMLHttpRequest;m.open("GET","/api"),m.onreadystatechange=function(e){if(4===m.readyState)if(200===m.status)for(var t=JSON.parse(m.responseText),n=o;n<t.length;n++){var a=r.insertRow(n+1);a.dataset.json=JSON.stringify(t[n]),a.insertCell(0).innerText=t[n].vehicle_number,a.insertCell(1).innerText=t[n].time_in,a.insertCell(2).innerText=t[n].time_out,setComment(a.insertCell(3),t[n].comment)}else clearInterval(s)},m.send()}s=setInterval(t,1e3),t()};